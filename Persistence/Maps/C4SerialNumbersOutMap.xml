<?xml version="1.0" encoding="utf-8" ?>
<sqlMap
  namespace="C4SerialNumbersOutMap"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://ibatis.apache.org/mapping"
 >
	<alias>
		<typeAlias alias="SerialNumberItem" type="Domain.SerialNumberItem" />
		<typeAlias alias="DeliveryOrderQuery" type="Domain.DeliveryOrderQuery" />
	</alias>
	<resultMaps>
		<resultMap id="SerialNumberItemRM" class="SerialNumberItem">
			<result property="Id" column="ID"/>
			<result property="DocType" column="DOCTYPE"/>
			<result property="Date" column="DATE"/>
			<result property="DocNum" column="DOCNUM"/>
			<result property="SerialNum" column="SERIALNUM"/>
			<result property="DocEntry" column="DOCENTRY"/>
			<result property="DocDate" column="DOCDATE"/>
			<result property="LineNum" column="LINENUM"/>
			<result property="ItemCode" column="ITEMCODE"/>
			<result property="Description" column="DSCRIPTION"/>
			<result property="AltText" column="ALTTEXT"/>
			<result property="Quantity" column="QUANTITY"/>
			<result property="ProductId" column="PRODUCTID"/>
			<result property="Color" column="COLOR"/>
			<result property="NoSerialization" column="NOSERIALIZATION"/>
			<result property="SmartCodeOnly" column="SMARTCODEONLY"/>
			<result property="SerialCode" column="SERIALCODE"/>
			<result property="Verified" column="VERIFIED"/>
			<result property="Username" column="USERNAME"/>
			<result property="MacId" column="MACID"/>
			<result property="RealItemCode" column="REALITEMCODE"/>
			<result property="ProductGroup" column="PRODUCTGROUP"/>
			<result property="ProductFamily" column="PRODUCTFAMILY"/>
			<result property="ProductPillar" column="PRODUCTPILLAR"/>
			<result property="ReturnedByUser" column="RETURNEDBYUSER" />			
		</resultMap>
	</resultMaps>
	<parameterMaps>
		<parameterMap id="SerialNumberItemPM" class="SerialNumberItem">
			<parameter property="ProductGroup" column="ProductGroup"/>
			<parameter property="MacId" column="MACID"/>
		</parameterMap>
		<parameterMap id="DeliverOrderPM" class="DeliveryOrderQuery">
			<parameter property="ServerLocation" column="SERVERLOCATION"/>
			<parameter property="DocNum" column="DOCNUM"/>
		</parameterMap>
		<parameterMap id="DeliveryOrderItemsPM" class="DeliveryOrderQuery">
			<parameter property="ServerLocation" column="SERVERLOCATION"/>
			<parameter property="DocNum" column="DOCNUM"/>
			<parameter property="Username" column="USERNAME"/>
		</parameterMap>
	</parameterMaps>
	<statements>
		<procedure  id="SelectSmartMac" parameterMap="SerialNumberItemPM" resultMap="SerialNumberItemRM">
			sp_LocateSmartMac
		</procedure>
		<procedure  id="SelectDeleiveryOrderItems" parameterMap="DeliveryOrderItemsPM" resultMap="SerialNumberItemRM">
			sp_delivery_synch
		</procedure>
		<procedure  id="SelectDeleiveryOrder" parameterMap="DeliveryOrderPM" resultMap="DeliveryOrderRM">
			sp_delivery_header
		</procedure>
		<update id="UpdateSerialNumber" parameterClass="SerialNumberItem" >
			Update C4_SERIALNUMBERS_OUT set SERIALCODE= UPPER(#SerialCode#), USERNAME= #Username#, MACID =#MacId#, RETURNEDBYUSER = null where ID = #Id#
		</update>
	</statements>
</sqlMap>